
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tausug-English Dictionary</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f8f9fa;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .search-container, .add-word-container, .export-container {
      text-align: center;
      margin: 15px 0;
    }
    input {
      padding: 8px;
      margin: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      padding: 8px 15px;
      margin: 5px;
      border: none;
      border-radius: 6px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    .entry {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #fff;
      padding: 10px;
      margin: 8px auto;
      border: 1px solid #ddd;
      border-radius: 6px;
      width: 80%;
    }
    .word-texts {
      display: flex;
      gap: 15px;
      font-size: 16px;
    }
    .word-buttons button {
      background-color: #28a745;
    }
    .word-buttons .deleteBtn {
      background-color: #dc3545;
    }
  </style>
</head>
<body>

  <h1>Tausug-English Dictionary</h1>

  <!-- Search Bar -->
  <div class="search-container">
    <input type="text" id="search" placeholder="Search Tausug or English...">
    <button id="searchBtn">Search</button>
  </div>

  <!-- Dictionary Display -->
  <div id="dictionary"></div>

  <!-- Add Word Section -->
  <div class="add-word-container">
    <h3>Add New Word</h3>
    <input type="text" id="newTausug" placeholder="New Tausug word">
    <input type="text" id="newEnglish" placeholder="English translation">
    <button id="addWordBtn">Add Word</button>
  </div>

  <!-- Export & Import -->
  <div class="export-container">
    <button id="exportBtn">Export Dictionary (JSON)</button>
    <input type="file" id="importFile" accept=".json" style="display:none;">
    <button id="importBtn">Import Dictionary (JSON)</button>
  </div>

  <script>
    // Load dictionary from localStorage or default
    const dictionary = JSON.parse(localStorage.getItem('dictionary')) || [
      { tausug: "buli'", english: "gluteus" },
      { tausug: "unud bi'tis", english: "calf muscle" },
      { tausug: "unud duwa-ow", english: "biceps muscle (2 heads)" }
    ];

    const dictionaryContainer = document.getElementById('dictionary');
    const searchInput = document.getElementById('search');
    const searchBtn = document.getElementById('searchBtn');
    const addWordBtn = document.getElementById('addWordBtn');
    const newTausug = document.getElementById('newTausug');
    const newEnglish = document.getElementById('newEnglish');
    const exportBtn = document.getElementById('exportBtn');
    const importBtn = document.getElementById('importBtn');
    const importFile = document.getElementById('importFile');

    // Save to localStorage
    function saveDictionary() {
      localStorage.setItem('dictionary', JSON.stringify(dictionary));
    }

    // Render dictionary
    function renderDictionary(entries) {
      dictionaryContainer.innerHTML = '';
      entries.forEach((entry, index) => {
        const div = document.createElement('div');
        div.className = 'entry';
        div.innerHTML = `
          <div class="word-texts">
            <span><b>${entry.tausug}</b></span>
            <span>${entry.english}</span>
          </div>
          <div class="word-buttons">
            <button class="editBtn">Edit</button>
            <button class="deleteBtn">Delete</button>
          </div>
        `;
        // Edit
        div.querySelector('.editBtn').addEventListener('click', () => {
          const newT = prompt("Edit Tausug word:", entry.tausug);
          const newE = prompt("Edit English translation:", entry.english);
          if (newT && newE) {
            entry.tausug = newT;
            entry.english = newE;
            saveDictionary();
            renderDictionary(dictionary);
          }
        });
        // Delete
        div.querySelector('.deleteBtn').addEventListener('click', () => {
          dictionary.splice(index, 1);
          saveDictionary();
          renderDictionary(dictionary);
        });
        dictionaryContainer.appendChild(div);
      });
    }

    // Add new word
    addWordBtn.addEventListener('click', () => {
      const tausug = newTausug.value.trim();
      const english = newEnglish.value.trim();
      if (!tausug || !english) return;

      dictionary.push({ tausug, english });
      saveDictionary();
      renderDictionary(dictionary);

      newTausug.value = '';
      newEnglish.value = '';
    });

    // Search
    searchBtn.addEventListener('click', () => {
      const term = searchInput.value.trim().toLowerCase();
      const results = dictionary.filter(entry =>
        entry.tausug.toLowerCase().includes(term) ||
        entry.english.toLowerCase().includes(term)
      );
      renderDictionary(results);
    });

    // Export JSON
    exportBtn.addEventListener('click', () => {
      const dataStr = JSON.stringify(dictionary, null, 2);
      const blob = new Blob([dataStr], { type: "application/json" });
      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');
      a.href = url;
      a.download = "tausug_dictionary.json";
      a.click();

      URL.revokeObjectURL(url);
    });

    // Import JSON
    importBtn.addEventListener('click', () => {
      importFile.click();
    });

    importFile.addEventListener('change', (event) => {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = (e) => {
        try {
          const importedData = JSON.parse(e.target.result);
          if (Array.isArray(importedData)) {
            dictionary.push(...importedData);
            saveDictionary();
            renderDictionary(dictionary);
            alert("✅ Dictionary imported successfully!");
          } else {
            alert("❌ Invalid JSON format.");
          }
        } catch (err) {
          alert("❌ Error reading JSON file.");
        }
      };
      reader.readAsText(file);
    });

    // Initial render
    renderDictionary(dictionary);
  </script>
</body>
</html>

